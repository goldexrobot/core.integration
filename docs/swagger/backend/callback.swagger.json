{
  "swagger": "2.0",
  "info": {
    "description": "Goldex can send a number of `POST` callbacks (`application/json`) to your backend.\nSome callbacks are `synchronous`, which means if the callback is defined it `must` respond with HTTP status `200`.\nOther callbacks are `asynchronous`: Goldex queues this callback and periodically tries to deliver it, until get HTTP status `200`.\n\nCallbacks (see Goldex dashboard for detailed list):\n1. Item evaluation just started (sync);\n2. Item evaluation finished successfully (async);\n3. Storage cell occupation attempt (sync);\n4. Storage cell release attempt (sync);\n5. Custom named methods accessable for terminal UI (sync).\n\nGoldex sends HTTP headers with each callback:\n1. `X-CBOT-PROJECT-ID` contains Goldex-world project ID;\n2. `X-CBOT-BOT-ID` contains Goldex-world bot ID;\n\nMoreover, Goldex signs the callbacks, so you are able to verify it with a per-project public key (see Goldex dashboard).\n\nActual callback payloads are described below in this document.",
    "title": "Goldex backend callbacks."
  },
  "paths": {},
  "definitions": {
    "EvalFinished": {
      "description": "Describes evaluation and decision data and is sent only on successful evaluation completion",
      "type": "object",
      "properties": {
        "alloy": {
          "description": "Detected primary metal/alloy",
          "type": "string",
          "x-go-name": "Alloy",
          "example": "\"au\", \"ag\""
        },
        "alloy_content": {
          "description": "Content of the metal in spectrum in percents",
          "type": "number",
          "format": "double",
          "x-go-name": "AlloyContent",
          "example": 99.8
        },
        "bot_id": {
          "description": "Bot ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "BotID",
          "example": 42
        },
        "confidence": {
          "description": "Overall result confidence/score [0..1], where 1 - is fully confident result, and value below 0.88 is alarming.",
          "type": "number",
          "format": "double",
          "x-go-name": "Confidence",
          "example": 0.889
        },
        "eval_id": {
          "description": "Evaluation ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "EvalID",
          "example": 1337
        },
        "fineness_carat": {
          "description": "Detected fineness in carats",
          "type": "string",
          "x-go-name": "FinenessCarat",
          "example": "\"24K\""
        },
        "fineness_millesimal": {
          "description": "Detected millesimal fineness: 585 stands for 58.5%, 999 =\u003e 99.9%, 9999 =\u003e 99.99%",
          "type": "integer",
          "format": "int64",
          "x-go-name": "FinenessMillesimal",
          "example": 9999
        },
        "fineness_purity": {
          "description": "Detected fineness purity in percents",
          "type": "number",
          "format": "double",
          "x-go-name": "FinenessPurity",
          "example": 99.9
        },
        "photo": {
          "description": "Photos available",
          "type": "array",
          "items": {
            "$ref": "#/definitions/EvalFinishedPhoto"
          },
          "x-go-name": "Photo"
        },
        "project_id": {
          "description": "Project ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "ProjectID",
          "example": 1
        },
        "risky": {
          "description": "System decision about the evaluation",
          "type": "boolean",
          "x-go-name": "Risky",
          "example": false
        },
        "spectrum": {
          "description": "Spectrum",
          "type": "object",
          "additionalProperties": {
            "type": "number",
            "format": "double"
          },
          "x-go-name": "Spectrum",
          "example": {
            "au": 99.8
          }
        },
        "warnings": {
          "description": "Warnings that should help with decision. For instance, there could be tungsten covered with gold.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "x-go-name": "Warnings",
          "example": [
            "tungsten_in_gold"
          ]
        },
        "weight": {
          "description": "Item weight",
          "type": "number",
          "format": "double",
          "x-go-name": "Weight",
          "example": 3.141
        }
      },
      "x-go-package": "github.com/goldexrobot/core.integration/backend/callback"
    },
    "EvalFinishedPhoto": {
      "description": "Contains evaluation photo details",
      "type": "object",
      "properties": {
        "origin": {
          "description": "An origin photo comes from. Here \"item\" is item photo, \"outer\" is external camera",
          "type": "string",
          "x-go-name": "Origin",
          "example": "\"item\", \"outer\""
        },
        "photo_id": {
          "description": "File ID",
          "type": "string",
          "x-go-name": "PhotoID",
          "example": "3dd321739a694bbab93d7aae360a4ab4"
        },
        "preview_id": {
          "description": "File ID",
          "type": "string",
          "x-go-name": "PreviewID",
          "example": "eef30f5dc98e4c7d8d2f8df9df56c0d0"
        }
      },
      "x-go-package": "github.com/goldexrobot/core.integration/backend/callback"
    },
    "EvalStarted": {
      "description": "Describes new evaluation that is being just started",
      "type": "object",
      "properties": {
        "bot_id": {
          "description": "Bot ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "BotID",
          "example": 42
        },
        "eval_id": {
          "description": "Evaluation ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "EvalID",
          "example": 1337
        },
        "project_id": {
          "description": "Project ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "ProjectID",
          "example": 1
        }
      },
      "x-go-package": "github.com/goldexrobot/core.integration/backend/callback"
    },
    "StorageCellEvent": {
      "description": "This is common data sent in a storage related callbacks",
      "type": "object",
      "properties": {
        "bot_id": {
          "description": "Bot ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "BotID",
          "example": 42
        },
        "cell": {
          "description": "Cell address",
          "type": "string",
          "x-go-name": "Cell",
          "example": "\"A1\", \"J9\""
        },
        "domain": {
          "description": "Origin of the event in terms of UI flow. Here \"dashboard\" is on-bot system dashboard, \"other\" is some custom origin.",
          "type": "string",
          "x-go-name": "Domain",
          "example": "\"other\", \"dashboard\", \"buyout\", \"shop\", \"pawnshop\""
        },
        "project_id": {
          "description": "Project ID",
          "type": "integer",
          "format": "uint64",
          "x-go-name": "ProjectID",
          "example": 1
        }
      },
      "x-go-package": "github.com/goldexrobot/core.integration/backend/callback"
    }
  }
}